{# menu/templates/menu/menu_list.html #}
{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/menu.css' %}">
{% endblock %}

{% block content %}
<div class="table-container">
  <div class="table-header">
    <h2>ðŸ“‹ Manage Menu Items</h2>
    <a href="{% url 'menu:create' %}" class="btn-primary">âž• Add Item</a>
  </div>

  <div class="table-wrap">
    <table class="data-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Item</th>
          <th>Description</th>
          <th>Category</th>
          <th>Price</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr>
          <td class="mono">#{{ item.id }}</td>

          <td class="menu-item-cell">
            {% if item.image %}
              <img src="{{ item.image.url }}" alt="{{ item.name }}" class="menu-thumb" width="50" height="50" loading="lazy">
            {% else %}
              <span class="menu-avatar menu-avatar--50">{{ item.name|first|upper }}</span>
            {% endif %}
            <div class="menu-item-text">
              <div class="menu-item-title">{{ item.name }}</div>
            </div>
          </td>

          <td>{{ item.description }}</td>
          <td>{{ item.get_category_display }}</td>
          <td>â‚±{{ item.price }}</td>

          <td>
            {% if item.is_available %}
              <span class="status success">Available</span>
            {% else %}
              <span class="status fail">Unavailable</span>
            {% endif %}
          </td>

          <td class="actions-cell">
            <a href="{% url 'menu:edit' item.id %}" class="btn-small primary">Edit</a>
            <form action="{% url 'menu:delete' item.id %}" method="post" style="display:inline" onsubmit="return confirm('Delete {{ item.name }}?');">
              {% csrf_token %}
              <button type="submit" class="btn-small danger">Delete</button>
            </form>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="7" class="empty">No menu items found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
