{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/menu.css' %}">
{% endblock %}

{% block content %}
<div class="table-container">
    <div class="header-row">
        <h2>ðŸ“– Menu Items</h2>
        <a href="{% url 'menu_create' %}" class="btn-link">+ Add New Item</a>
    </div>

    <table>
        <thead>
            <tr>
                <th>Image</th>
                <th>Name & Description</th>
                <th>Category</th>
                <th>Tags</th>
                <th>Price</th>
                <th>Available</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% if menu_items %}
            {% for item in menu_items %}
            <tr>
                <!-- Image -->
                <td>
                    {% if item.image %}
                        <img src="{{ item.image.url }}" width="60" height="60" style="border-radius:6px;object-fit:cover;" alt="{{ item.name }}">
                    {% else %}
                        <div style="width:60px;height:60px;display:flex;align-items:center;justify-content:center;background:#f0f0f0;border-radius:6px;color:#aaa;font-size:12px;">No Img</div>
                    {% endif %}
                </td>

                <!-- Name + Description -->
                <td>
                    <div class="menu-item-name">
                        <strong>{{ item.name }}</strong>
                    </div>
                    {% if item.description %}
                        <div class="menu-item-description">{{ item.description }}</div>
                    {% endif %}
                </td>

                <!-- Category -->
                <td><span style="text-transform:capitalize;">{{ item.get_category_display }}</span></td>

                <!-- Tags -->
                <td>
                    {% if item.tags %}
                        <span style="font-size:13px;color:#555;">{{ item.tags }}</span>
                    {% else %}
                        <span style="color:#aaa;">â€”</span>
                    {% endif %}
                </td>

                <!-- Price -->
                <td class="menu-price">â‚±{{ item.price }}</td>

                <!-- Available -->
                <td>
                    {% if item.is_available %}
                        <span class="status-badge completed">Yes</span>
                    {% else %}
                        <span class="status-badge cancelled">No</span>
                    {% endif %}
                </td>

                <!-- Actions -->
                <td class="actions-cell">
                    <a href="{% url 'menu_edit' item.id %}" class="btn-small primary">Edit</a>
                    <form action="{% url 'menu_delete' item.id %}" method="post" style="display:inline-block;">
                        {% csrf_token %}
                        <button type="submit" class="btn-small danger" onclick="return confirm('Delete this item?')">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan="7" style="text-align:center;color:#888;padding:20px;">No items in the menu.</td>
            </tr>
        {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}
